---
title:  "Automated Malware Analysis - Part 3"
date:   2016-05-09 13:04:23
categories: [lab]
tags: [analysis, malware, rem, vm]
---
After preparing most of our configurations for the OSX system in Part 2](https://ashbyca.github.io/2016/automated-malware-analysis-part2/) of the multi-part post on "Automated Malware Analyis" we are finally
ready to install our Cuckoo instance.  This can be accomplished on either the existing host device (OSX) or in a virtual
machine.  For my setup, I have a cuckoo instance running on my host machine along with the required software, the commands
below is how I achieved this.

Install Python + dependencies - Installed where you have Cuckoo.  Most of these can be installed with either pip or easy_install.

1. python-magic 

```Bash
$ easy_install python-magic
```
2. python-dpkt - googlecode - download (dmg)

3. python-sqlalchemy 

```Bash
$ easy_install sqlalchemy
```

4. python-mako 

```Bash
$ easy_install mako
```

5. python-jinja

```Bash
$ easy_install Jinja2
```

6. python-bottle

```Bash
$ easy_install Bottle
```

7. SSDeep (for calculating hashes) - ssdeep - download (source)

8. python-pyrex

```Bash
$ easy_install pyrex
```

9. pyssdeep 

```Bash
$ svn checkout http://pyssdeep.googlecode.com/svn/trunk/ pyssdeep
```

10. [MondoDB](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-os-x/) and Python Support

```Bash
$ easy_install pymongo
$ curl http://downloads.mongodb.org/osx/mongodb-osx-x86_64-2.4.5.tgz > mongodb.tgz
```

11. pcregrep 

```Bash
$ brew install pcre
```
12. yara and yara-python

```Bash
$ brew install yara && brew install yara python
```

13. libpcap 

```Bash
$ brew install libpcap
```

Download & Install [Cuckoo](https://cuckoosandbox.org)

A couple of notes after the install
1. change permissions for cuckoo
2. change permissions of tcpdump

```Bash
first create backup cp tcpdump tcpdump.org
$ sudo chmod +s /usr/sbin/tcpdump
```

 At this point you should have cuckoo installed with all the required dependiences.  Next up creating our victim machine.
